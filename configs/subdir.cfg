ifeq ($(CURDIR),$(SRCTREE))
dir :=
else
dir := $(subst $(SRCTREE)/,,$(CURDIR))
endif

src := $(if $(dir),$(SRCTREE)/$(dir),$(SRCTREE))

obj := $(subst /,\,$(if $(dir),$(OBJTREE)/$(dir),$(OBJTREE)))

ifneq ($(obj), $(wildcard $(obj)))

$(shell $(MKDIR) $(obj))

endif